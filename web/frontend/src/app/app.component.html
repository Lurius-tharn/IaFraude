<!-- app.component.html -->
<div class="container">
  <h1>Formulaire de Prédiction</h1>

  <!-- Formulaire de recherche -->
  <div class="alert alert-primary">
    <form (ngSubmit)="apiCall()" #searchForm="ngForm">
      <div class="form-group">
        <label for="ville">Ville souhaitée</label>
        <input type="text" class="form-control" id="ville" name="ville" [(ngModel)]="city" />
      </div>
      <button type="submit" class="btn btn-primary mt-2">Rechercher</button>
    </form>
  </div>

  <!-- Formulaire de prédiction -->
  <div class="alert alert-info" *ngIf="searchForm.submitted">
    <form (ngSubmit)="onSubmit()" #predictForm="ngForm"  >
      <div class="form-group">
        <label for="ws">Vitesse du vent</label>
        <input type="text" class="form-control" id="ws" name="ws" [(ngModel)]="capteur.wind_speed" readonly />
      </div>
      <div class="form-group">
        <label for="ta">Température ambiante</label>
        <input type="text" class="form-control" id="ta" name="ta" [(ngModel)]="capteur.ambient_temp" readonly />
      </div>
      <div class="form-group">
        <label for="tc">Température du câble</label>
        <input type="number" class="form-control" id="tc" name="tc" [(ngModel)]="capteur.cable_temp" required />
      </div>
      <div class="form-group">
        <label for="i">Intensité</label>
        <input type="number" class="form-control" id="i" name="i" [(ngModel)]="capteur.intensity" required />
      </div>
      <button type="submit" class="btn btn-primary mt-2">Valider</button>
    </form>
  </div>
</div>

<div id="chartContainer" style="height: 360px; width: 100%;"></div>
<div class="alert alert-success" *ngIf="response.energy !== undefined">
  Avec cette recherche, vous avez une consommation de {{  response.energy.toPrecision(5) }} CO2.
</div>
